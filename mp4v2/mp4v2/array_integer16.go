// This file was automatically generated by genny.
// Any changes will be lost if this file is regenerated.
// see https://github.com/cheekybits/genny

package mp4v2

import (
	"fmt"
	"math"
)

// MP4Integer16Array needs documentation
type MP4Integer16Array struct {
	mElements       []uint16
	mNumElements    MP4ArrayIndex
	mMaxNumElements MP4ArrayIndex
}

// ValidIndex needs documentation
func (a *MP4Integer16Array) ValidIndex(index MP4ArrayIndex) bool {
	return index < a.mNumElements
}

// Size needs documentation
func (a *MP4Integer16Array) Size() MP4ArrayIndex {
	return a.mNumElements
}

// MaxSize needs documentation
func (a *MP4Integer16Array) MaxSize() MP4ArrayIndex {
	return a.mMaxNumElements
}

// Add needs documentation
func (a *MP4Integer16Array) Add(newElement uint16) {
	a.Insert(newElement, a.mNumElements)
}

// Insert needs documentation
func (a *MP4Integer16Array) Insert(newElement uint16, newIndex MP4ArrayIndex) {
	if newIndex > a.mNumElements {
		panic("Illegal array index")
	}

	if a.mNumElements == a.mMaxNumElements {
		a.mMaxNumElements = MP4ArrayIndex(math.Max(float64(a.mMaxNumElements), 1) * 2)
		newMElements := make([]uint16, a.mMaxNumElements)
		copy(newMElements, a.mElements)
		a.mElements = newMElements
	}

	a.mElements[newIndex] = newElement
	a.mNumElements++
}

// Delete needs documentation
func (a *MP4Integer16Array) Delete(index MP4ArrayIndex) {
	if !a.ValidIndex(index) {
		panic(fmt.Sprintf("Illegal array index: %v of %v", index, a.mNumElements))
	}

	a.mNumElements--
	if index < a.mNumElements {
		a.mElements = append(a.mElements[:index], a.mElements[index+1:]...)
	}
}

// Resize needs documentation
func (a *MP4Integer16Array) Resize(newSize MP4ArrayIndex) {
	if newSize > a.mMaxNumElements {
		newMElements := make([]uint16, newSize)
		copy(newMElements, a.mElements)
		a.mElements = newMElements
	} else {
		a.mElements = a.mElements[:newSize]
	}

	a.mNumElements = newSize
	a.mMaxNumElements = newSize
}

// Get needs documentation
func (a *MP4Integer16Array) Get(index MP4ArrayIndex) uint16 {
	if a.ValidIndex(index) {
		return a.mElements[index]
	}

	panic(fmt.Sprintf("Illegal array index: %v of %v", index, a.mNumElements))
}

// Set needs documentation
func (a *MP4Integer16Array) Set(index MP4ArrayIndex, value uint16) {
	if a.ValidIndex(index) {
		a.mElements[index] = value
	}

	panic(fmt.Sprintf("Illegal array index: %v of %v", index, a.mNumElements))
}
